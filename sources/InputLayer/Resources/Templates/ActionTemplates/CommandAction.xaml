<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:actions="clr-namespace:InputLayer.Common.Models.Actions;assembly=InputLayer.Common"
                    xmlns:controls="clr-namespace:InputLayer.Controls"
                    xmlns:converters="clr-namespace:InputLayer.Converters"
                    xmlns:me="clr-namespace:InputLayer.MarkupExtensions"
                    xmlns:views="clr-namespace:InputLayer.Views">

    <DataTemplate DataType="{x:Type actions:CommandAction}">
        <controls:GridWithGap ColumnGap="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <controls:PlaceholderControl Grid.Column="0"
                                         IsContentFocused="{Binding ElementName=CommandTextBox, Path=IsFocused}"
                                         IsEmpty="{Binding ElementName=CommandTextBox, Path=Text, Converter={converters:TextToBooleanConverter}}"
                                         Placeholder="{me:LocalizationBinding Key=InputLayer.CommandAction.Placeholder}">
                <TextBox x:Name="CommandTextBox"
                         VerticalContentAlignment="Center"
                         Text="{Binding Command, UpdateSourceTrigger=LostFocus}" />
            </controls:PlaceholderControl>

            <!--  ReSharper disable Xaml.BindingWithContextNotResolved  -->
            <Button x:Name="ToggleVisibleActionButton"
                    Grid.Column="1"
                    Command="{Binding DataContext.ToggleVisibleActionCommand, RelativeSource={RelativeSource AncestorType={x:Type views:InputLayerSettingsView}}}"
                    CommandParameter="{Binding}"
                    Cursor="Hand"
                    ToolTip="{me:LocalizationBinding Key=InputLayer.ExecutableAction.ToggleExecutableVisibility.Description}">
                <Path Width="16"
                      Height="16"
                      Stretch="Uniform"
                      Stroke="{Binding Foreground, ElementName=ToggleVisibleActionButton}"
                      StrokeEndLineCap="Round"
                      StrokeLineJoin="Round"
                      StrokeMiterLimit="10"
                      StrokeStartLineCap="Round"
                      StrokeThickness="2">
                    <Path.Data>
                        <MultiBinding Converter="{converters:BooleanToResourceConverter}" Mode="OneWay">
                            <Binding Path="IsHidden" />
                            <Binding Source="NoEyeGeometry" />
                            <Binding Source="EyeGeometry" />
                        </MultiBinding>
                    </Path.Data>
                </Path>
            </Button>
            <!--  ReSharper restore Xaml.BindingWithContextNotResolved  -->
        </controls:GridWithGap>
    </DataTemplate>

</ResourceDictionary>